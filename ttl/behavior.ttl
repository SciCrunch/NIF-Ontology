@prefix ilxtr: <http://uri.interlex.org/tgbugs/uris/readable/> .
@prefix NIFRID: <http://uri.neuinfo.org/nif/nifstd/readable/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix definition: <http://purl.obolibrary.org/obo/IAO_0000115> .
@prefix : <http://uri.interlex.org/tgbugs/uris/readable/base-colon-nonsense/> .

ilxtr:Ont-BTO a owl:Ontology ;
    skos:title "Behavioral Tasks Ontology" ;
    ilxtr:comment "an ontology for describing behavioral tasks, super duper work in progress" .

ilxtr:example-auditory-perception-task a owl:NamedIndividual, ilxtr:BehavioralTask;
:stimulus-system :auditory;
:stimulus-system-insturction :auditory;
:TODO :instructed;
:TODO :listen;  # nervous system
:TODO :stimulus-random;  # 12 categories * 3 examples for each category
:TODO :stimulus-multiple;
:TODO :stimulus-temporal-sequential;
:TODO :discriminate;  # nervous system
:TODO :closed-eyes;
#:previously-heard  # do we want this to be orthognola, so stimulus novel, stimulus prior exposure
#:not-previously-heard
:TODO :stimulus-novel;
:TODO :stimulus-previously-presented;
#:stimulus-prior-exposure

# skipping 12 seconds duration 22KHz 16bits, mono for now

:TODO :stimulus-intensity-normalized;
:TODO :stimulus-intensity-comfortable;

:TODO :interleaved-rest-period;

# stimulus categories
:TODO :speech;
:TODO :speech-reversed;
:TODO :music;
:TODO :sounds-animal;
:TODO :sounds-environmental
.

ilxtr:example-visuo-spatial-working-memory-task a owl:NamedIndividual, ilxtr:BehavioralTask;
:stimulus-system :visual;
:TODO :instructed;
:TODO :feedback;
ilxtr:assertedCognitiveSystem :working-memory;
#:stimulus-dot-multiple
#:stimulus-grid
#:stimlulus-dot-single
:TODO :stimulus-subset-matches;
# hlss because it is really the result of two similar stimuli with a temporal gap, and the instruction
# the only question is whether the instruction is what makes it "match-"
# "truth" is the stimulus that was actually displayed
ilxtr:highLevelStimulusStructure :stimulus;
ilxtr:highLevelStimulusStructure :rest;
ilxtr:highLevelStimulusStructure :stimulus-yes-subset;
ilxtr:highLevelStimulusStructure :stimulus-no-subset;
ilxtr:highLevelStimulusStructure :stimulus-rest-stimulus-subset;
ilxtr:highLevelNervousSystemActivityStructure :match;  # could also be what is going on in the nervous system component
ilxtr:highLevelResultStructure :yes;
ilxtr:highLevelResultStructure :no;
ilxtr:highLevelStimulusAndResultStructure :match-to-sample; # or is it just highLevelTaskStructure
ilxtr:highLevelStimulusAndResultStructure :delayed-match-to-sample;
ilxtr:hasResultDetector :button;
ilxtr:MotorResponseAnatomicalEntity :right-finger;
#ilxtr:MotorResponseAnatomicalEntity :right-index-finger;
#ilxtr:MotorResponseAnatomicalEntity :right-middle-finger;
:stimlulus-system-feedback :visual;
:feedback-conveys :correctness;
.

ilxtr:example-visuo-spatial-working-memory-task-control a owl:NamedIndividual, ilxtr:BehavioralTask;
:TODO :visual;
:TODO :instructed;
:TODO :fixation
#:stimulus-dot-single
#:stimulus-dot-internal-white-spot
.

ilxtr:hasProcessPart a owl:ObjectProperty .

ilxtr:hasStimulusProcessPart a owl:ObjectProperty ;
    rdfs:domain ilxtr:Behavior ;
    rdfs:range ilxtr:StimulusComponent ;
    rdfs:subPropertyOf ilxtr:hasProcessPart .

ilxtr:hasSensoryProcessPart a owl:ObjectProperty ;
    rdfs:domain ilxtr:Behavior ;
    rdfs:range ilxtr:SensoryComponent ;
    rdfs:subPropertyOf ilxtr:hasProcessPart .

ilxtr:hasResponseProcessPart a owl:ObjectProperty ;
    rdfs:domain ilxtr:Behavior ;
    # reminder: response conflates motor and result
    rdfs:range ilxtr:ResponseComponent ;
    rdfs:subPropertyOf ilxtr:hasProcessPart .

ilxtr:hasStimulus a owl:ObjectProperty ;
    ilxtr:comment "a stimulus itself is usually another process?" .

ilxtr:hasStimulusProducer a owl:ObjectProperty ;  # FIXME producer isn't quite right, it's more just hasStimulusParticipant ???
    rdfs:domain ilxtr:Behavior ;
    owl:propertyChainAxiom (
            ilxtr:hasStimulusProcessPart
            ilxtr:hasParticipant
    )
    #owl:ObjectPropertyChain (ilxtr:hasProcessPart o ilxtr:hasParticipant)
            # could also be (hpp o hasDevice)
    .

ilxtr:hasSensor a owl:ObjectProperty ;
    ilxtr:comment "a biological sensor, usually an anatomical entity" ;
    rdfs:domain ilxtr:Behavior ;
    rdfs:range ilxtr:AnatomicalEntity ;
    owl:propertyChainAxiom (
            ilxtr:hasSensoryProcessPart
            ilxtr:hasParticipant
    )
    .

ilxtr:some-behavior-1 a owl:NamedIndividual ;
    ilxtr:comment "old" ;
    ilxtr:hasProcessPart
    [ a owl:Class ;
      rdfs:subClassOf ilxtr:StimulusComponent;
      ilxtr:hasParticipant ilxtr:drifting-grating-displaying-thing ] ;
    ilxtr:hasStimulus ilxtr:drifting-grating-displaying-thing
    .


# what goes here? can devices go here? like a tv, a screen, a speaker, a piezo, a thermocouple, etc.?
# the simulus component has participant some device
ilxtr:hasStimulusFeedback a owl:ObjectProperty .
ilxtr:hasStimulusHighLevelStructureFeedback a owl:ObjectProperty .
# e.g. difficulty
ilxtr:hasHighLevelStimulusStructure a owl:ObjectProperty .
# gratings, plaids, chirps, olfactory blends, feedback about correctness
# has stimulus with some feedback role or something like that
ilxtr:hasHighLevelSensory a owl:ObjectProperty .

ilxtr:hasMotorAnatomy a owl:ObjectProperty ;
    ilxtr:comment """hand, shoulder, finger, vocal cords, etc.

in the case that there are multiple bits of anatomy some that move
and some that are targets, e.g. left hand scratches right shoulder
right hand scratches left shoulder etc. the combinations are lost
but at least we can recover this directly, also note that the
target vs moving is not actually obvious, because sometimes the
target is what is moved, the left shoulder can be moved to produce
scratching by a stationary right hand, see bear scratching self on tree"""
    .

#ilxtr:hasMotorGlandSystemAnatomyThatMoves a owl:ObjectProperty ;
    #ilxtr:comment "the right hand scratches the x" .

# we need compentecy query for coding the scratching behavior case
# ilxtr:hasMotorThing hand: shoulder: . then at least you can find it pairing isn't here
#ilxtr:hasRelatedResponseTarget a owl:ObjectProperty .

ilxtr:hasHighLevelMotorStructure a owl:ObjectProperty ;
    ilxtr:comment """

this is where the full complexity of a behavior could be described,
so the range is a ilxtr:Behavior that is a process part of the whole behavior,
the restriction to motor here is a bit confusing because e.g. scratching is a
whole feedback loop behavior, not just a motor behavior, so the right way to do
this would be to describe all the possible outcomes separately and then use
hasProcessPart to put them together into the whole behavior?


scratch target anatomy 1 (own nose)
scratch target anatomy 2 (own butt)
scratch target anatomy 3 (other nose)
scratch target anatomy 4 (other butt)

nose and butt here a auxillary anatomy that could be the target of some behavior

appendage scratches target, where does this ontology draw the line
there is also implicit nervous system feedback in this example
"""
    .
# scratching, singing, language, subvocalization
ilxtr:hasHighLevelResponse a owl:ObjectProperty .  # this one is confusing, motor + gland etc.
ilxtr:hasResultDetector a owl:ObjectProperty ;
    ilxtr:comment """examples: button, investigator, microphone, whiteboard + marker, video camera
result is 'what happened to the environment' might also call it effect? (worse?)
we don't care about result recorder here

what if there are multiple steps in processing the response and it happens off line
after the primary data is collected?

this is closer to recorder in a sense, usually modality specific
""" ;
    rdfs:domain ilxtr:Behavior ;
    rdfs:range ilxtr:continuant .

ilxtr:hasHighLevelResultStructure a owl:ObjectProperty ;
    ilxtr:comment "language, interpretive dance, ..., target, go/no/go failure condition vs success, scratch, no scratch, butt scratch, nose scratch, vigorous scratch (these goe in HLMotor)"
.  # this one is confusing, motor + gland etc.


ilxtr:hasHighLevelResultStructureDetector a owl:ObjectProperty ;
    # is this subPropertyOf hasResultDetector
    ilxtr:comment """
if we have two results say a word vs whistle
real example nonsense word, word, syllable, non-syllable letters

then we have either an investigator that is
going to distingish them, or these days maybe some algorithmic classifier
after a processing pipeline

a microphone does not fit here because it cannot actually distingish the high level categories
"""
    .

# language, things not necessarily measured, correctness?
ilxtr:hasHighLevelTotalTaskStructure a owl:ObjectProperty .
# closed loop, feedback about correctness, something that ties a result to a feedback stimulus

# how do we simplify cases where there is a stimulus after the response that provides
# feedback on whether the previous attempt was correct or similar, we don't want to have
# to string multiple behaviors together


ilxtr:Behavior a owl:Class . # subClassOf process

ilxtr:BehavioralTaskDescription a owl:Class ;  # subClassOf information artifact
    ilxtr:comment "Reminder that the behavioral task that we are trying to describe below is not itself the description but rather the process that is to be carried out." .

ilxtr:BehavioralTask a owl:Class ;
    ilxtr:comment "subset of behaviors that are subjected to measurement or some scientific control or more practically, that have some information artifact that describes them that includes an agent that determines whether they are carried out correctly rather than merely observes" ;
    rdfs:subClassOf ilxtr:Behavior,
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart ;  # process part is likely not quite what we want?
          owl:someValuesFrom ilxtr:StimulusComponent ],
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart;
          owl:someValuesFrom ilxtr:SensoryComponent ],
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart;
          owl:someValuesFrom ilxtr:NervousSystemComponent ],
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart;
          owl:someValuesFrom ilxtr:MotorComponent ],  # missing non-motor (glandular) closed loop eeg etc.
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart;
          owl:someValuesFrom ilxtr:ResponseComponent ],  # response conflates at least 3 other components
        [ a owl:Restriction;
          owl:onProperty ilxtr:hasProcessPart;
          owl:someValuesFrom ilxtr:ResultComponent ]  # impact on the environment
    # result component has participant some button (e.g.)
 .

# is it just motor?
# more saliva production (gladular activity?), if you measure total saliva volume/unit time is that in the ResponseComponent
# more methane production/farting etc.
# fever, thermoregulation, sweating
# heart rate

ilxtr:BehavioralTaskComponent a owl:Class ;
    ilxtr:comment """there is an implicit \"intended\" prepended to all these components
because in the absence of a proper control we can't know for sure
that e.g. a particular sensory system was indeed the sensory component
that was used during the behavioral task""" .

ilxtr:StimulusComponent a owl:Class ;
    rdfs:subClassOf ilxtr:BehavioralTaskComponent ;
    definition: "the part of a behavioral task that is involved in "
.
ilxtr:SensoryComponent a owl:Class ;
    definition: "the part of a behavioral task that is involved in "
    .
ilxtr:MotorComponent a owl:Class ;
    definition: "the part of a behavioral task that is involved in "
    .
ilxtr:ResultComponent a owl:Class ;
    # this is the change in the environment
    definition: "the part of a behavioral task that is involved in "
    .
ilxtr:ResponseComponent a owl:Class ;
    # change in environment caused by the behavior PLUS the motor component, it conflates them
    definition: "the part of a behavioral task that is involved in "
.
ilxtr:NervousSystemComponent a owl:Class ;
    # nervous system not-motor-not-sensory
    definition: "the part of a behavioral task that is involved in "
    .
ilxtr:CognitiveComponent a owl:Class ;
    definition: "the part of a behavioral task that is involved in " ;
    ilxtr:comment "based on our other naming it seems that the CognitiveComponent is more like the NervousSystemHighLevelStructureCompoenent"
    .

# ilxtr:ProcessingComponent a owl:Class .

ilxtr:StimulusModality a owl:Class .
# could be stimulation of the NONsensory neurons using electrical, mechanical, optical, chemical
# this is a smaller set and sensory modality has multiple different sensing systems that can be actuated by the same modality, e.g. can feel the mechical stimulation from sound via skin and ear

ilxtr:SimulusHighLevelStructure a owl:Class ;
    ilxtr:comment "language, visual plaid, drifting grating, gabor patches, music"
    .

ilxtr:SensorySystem a owl:Class .

ilxtr:SensoryModality a owl:Class . # may not be different
# could be stimulation of the sensory neurons using electrical, mechanical, optical, chemical
# patrick notes that we can distinguish between sensory neurons and non-sensory neurons
# perhaps by using bfo:function

ilxtr:CognitiveSystem a owl:Class ;
    ilxtr:comment "is this actually NervousSystemHighLevelStructure for parallelism?"
    .

ilxtr:NervousSystemMeasurement a owl:Class ;
    ilxtr:comment "fMRI, EEG, EKG, ecog, single unit recording" .

ilxtr:NervousSystemStimulation a owl:Class ;
    ilxtr:comment "direct electrical stimulation, TMS, photon simulation (optogenetics), heat based stimulation, chemical stimulation, etc." .
# do we distingish between nervous and other? e.g. electrical stimulation of the muscles
# where does electrically stimulating a muscle to evoke a propreoceptive sensation fall?
# where does inducing the patellar reflex fall?
# startle response ?

ilxtr:MotorResponseAnatomicalEntity a owl:Class ;
    ilxtr:comment "some anatomical entity, hand, the muscles of the orofacial speech production system, oculomotor system, forelimb, hindlimb, locomotor, eye, hand, foot, finger" .

ilxtr:MotorResponseSystem a owl:Class ; # may not need?
    rdfs:subClassOf ilxtr:MotorResponseAnatomicalEntity .

ilxtr:ResponseHighLevelStructure a owl:Class ;
    ilxtr:comment "something that needs more processing to interpret, e.g. saying yes or no vs pressing left or right buttons; language, body language, gestures, humming melody, tapping a rythem, reaction time, startle response?, sneeze, facial expression" .

# ilxtr:ResponseVector a owl:Class .
ilxtr:ResponseEffector a owl:Class ; # XXX already covered by MotorResponseSystem
    ilxtr:comment "the thing that produces the response, i.e. the muscles, NOT the end plate potential, or possibly the pen held in the hand etc. could also be actuator" .
# ilxtr:ResponseSystem a owl:Class .

# ilxtr:ResponseModality a owl:Class .  # we think already captured in anatomical entity

ilxtr:ResponseMediator a owl:Class ;
    ilxtr:comment "interverning phenomena that usually are not explicitly mentioned in the task description e.g. sound waves, photos, direct force of hand on lever, etc."
.

ilxtr:ResponseReceiver a owl:Class ;
    # alterates ResponseDetector (seems more active in its response, want something more passive)
    # patrick gives the broken Smoke Detector example
    ilxtr:comment "this is the measurement device or thing, e.g. a piece of paper, or the under graduate taking notes, key is that it can be passive or active, but is usually active, is the piece of paper actually closer to the sound wave? but there is a secondary information transformation, but you do still want the first named target in the task description, for piece of paper think more checkboxes or holes punches than written responses (though of course it can mediate both)"
.

ilxtr:BehavioralAspectMeasured a owl:Class ;
    ilxtr:comment "reaction time, licking frequency, response correctness ratio, not going when in no go, going in go, (NOT BOLD signal), pupil dilation, blinking, corresponding to some muscle output NOT to some motor neuron output, blood pressure"
.

ilxtr:Device a owl:Class .   # rig falls under here
ilxtr:ResponseDevice a owl:Class .
ilxtr:SimulationDevice a owl:Class .

ilxtr:Protocol a owl:Class . # already defined elsewhere
